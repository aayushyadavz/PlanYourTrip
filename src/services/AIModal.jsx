import {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
} from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};


export const chatSession = model.startChat({
    generationConfig,
    history: [
        {
            role: "user",
            parts: [
                { text: "Generate a travel plan for Las Vegas for 3 days for a couple on a budget, including a list of hotel options with details such as the hotel name, address, price, image URL, geo-coordinates, rating, and a brief description. Additionally, suggest a 3-day itinerary in JSON format with details for each location, including the place name, description, image URL, geo-coordinates, ticket pricing, travel time between locations, and the best time to visit each. Ensure the travel plan is cost-effective and provides a well-organized schedule for the couple to enjoy their trip." },
            ],
        },
        {
            role: "model",
            parts: [
                { text: "Okay, here's a budget-friendly 3-day Las Vegas travel plan for a couple, including hotel options and a detailed itinerary in JSON format.\n\n**Hotel Options (Budget-Friendly)**\n\n```json\n{\n  \"hotels\": [\n    {\n      \"name\": \"Circus Circus Hotel & Casino\",\n      \"address\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price_range\": \"$50 - $120 per night\",\n      \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/2d/5f/70/circus-circus-hotel-casino.jpg?w=700&h=-1&s=1\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.139061,\n        \"longitude\": -115.166790\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic Las Vegas experience with affordable rooms, a circus theme, and family-friendly attractions. Located at the north end of the Strip.\"\n    },\n     {\n      \"name\": \"Excalibur Hotel & Casino\",\n      \"address\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price_range\": \"$60 - $150 per night\",\n        \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/06/4e/76/excalibur-hotel-casino.jpg?w=700&h=-1&s=1\",\n      \"geo_coordinates\": {\n        \"latitude\": 36.098639,\n        \"longitude\": -115.174770\n      },\n      \"rating\": 4.0,\n        \"description\": \"A medieval-themed hotel with budget-friendly options and a great location on the southern end of the Strip.\"\n    },\n    {\n       \"name\": \"OYO Hotel & Casino Las Vegas\",\n       \"address\": \"115 E Tropicana Ave, Las Vegas, NV 89109\",\n       \"price_range\": \"$45 - $110 per night\",\n        \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/24/20/58/e8/oyo-hotel-casino-las-vegas.jpg?w=700&h=-1&s=1\",\n      \"geo_coordinates\": {\n         \"latitude\": 36.101421,\n         \"longitude\": -115.171700\n        },\n       \"rating\": 3.0,\n        \"description\": \"Affordable hotel just a short walk from the Strip with basic amenities and budget-friendly dining options.\"\n     }\n  ]\n}\n```\n\n**3-Day Itinerary (JSON Format)**\n\n```json\n{\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"locations\": [\n        {\n          \"place_name\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"description\": \"A must-see iconic Las Vegas landmark perfect for photos.\",\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/Las_Vegas_Sign_at_Night.jpg/800px-Las_Vegas_Sign_at_Night.jpg\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.082757,\n            \"longitude\": -115.170011\n          },\n          \"ticket_pricing\": \"Free\",\n           \"travel_time_to_next\": \"10 minutes (walk)\",\n          \"best_time_to_visit\": \"Early Morning or Late Afternoon to avoid crowds and harsh sun\"\n        },\n         {\n          \"place_name\": \"Bellagio Conservatory & Botanical Gardens\",\n          \"description\": \"Stunning seasonal displays of flowers and plants. Great for a relaxed and free activity.\",\n           \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2a/af/3d/67/bellagio-conservatory-botanical.jpg?w=700&h=-1&s=1\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.112466,\n            \"longitude\": -115.174443\n          },\n          \"ticket_pricing\": \"Free\",\n          \"travel_time_to_next\": \"15 minutes (walk)\",\n          \"best_time_to_visit\": \"Morning or Early Afternoon\"\n        },\n         {\n          \"place_name\": \"Fountains of Bellagio\",\n          \"description\": \"Spectacular water show set to music and lights. A classic Las Vegas experience.\",\n           \"image_url\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2a/8c/ba/7e/fountains-of-bellagio.jpg?w=700&h=-1&s=1\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.112756,\n            \"longitude\": -115.174487\n          },\n           \"ticket_pricing\": \"Free\",\n           \"travel_time_to_next\": \"5 minutes (walk)\",\n          \"best_time_to_visit\": \"Evening for the best experience\"\n        },\n          {\n          \"place_name\": \"Linq Promenade\",\n          \"description\": \"Enjoy the lively atmosphere, street performers, and shops. Have dinner at a budget-friendly restaurant or grab a meal at a food court.\",\n          \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/21/87/85/50/the-linq-promenade.jpg?w=700&h=-1&s=1\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.116873,\n            \"longitude\": -115.170321\n          },\n          \"ticket_pricing\": \"Free (shopping and dining expenses vary)\",\n          \"travel_time_to_next\": \"Short walk\",\n          \"best_time_to_visit\": \"Evening to enjoy the vibrant atmosphere\"\n        }\n\n      ]\n    },\n    {\n      \"day\": 2,\n      \"locations\": [\n        {\n          \"place_name\": \"Fremont Street Experience\",\n          \"description\": \"Downtown Las Vegas' pedestrian mall with a light and sound show on a giant screen canopy.\",\n          \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/e0/d3/f7/fremont-street-experience.jpg?w=700&h=-1&s=1\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.170099,\n            \"longitude\": -115.140120\n          },\n          \"ticket_pricing\": \"Free\",\n          \"travel_time_to_next\": \"15 minutes (bus) to Downtown\",\n          \"best_time_to_visit\": \"Evening for the Viva Vision light shows\"\n        },\n        {\n          \"place_name\": \"Mob Museum\",\n          \"description\": \"Explore the history of organized crime in America. While there's a fee, it's a unique experience.\",\n           \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/23/c9/0a/78/mob-museum-exterior.jpg?w=700&h=-1&s=1\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.171853,\n            \"longitude\": -115.141495\n          },\n           \"ticket_pricing\": \"$29.95 per person\",\n          \"travel_time_to_next\": \"10-minute walk to Pawn Plaza\",\n          \"best_time_to_visit\": \"Afternoon to avoid crowds\"\n        },\n           {\n          \"place_name\": \"Pawn Plaza\",\n          \"description\": \"A quick visit to the filming location of the popular TV show Pawn Stars.\",\n             \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/32/81/75/pawn-plaza.jpg?w=700&h=-1&s=1\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.168983,\n            \"longitude\": -115.156159\n          },\n          \"ticket_pricing\": \"Free\",\n          \"travel_time_to_next\": \"Short walk\",\n          \"best_time_to_visit\": \"Afternoon\"\n        },\n        {\n          \"place_name\": \"High Roller Observation Wheel\",\n           \"description\":\"Experience breathtaking views of the Las Vegas Strip on the High Roller. Purchase tickets online for potential discounts.\",\n            \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2a/f7/3a/30/the-high-roller-at-night.jpg?w=700&h=-1&s=1\",\n          \"geo_coordinates\": {\n            \"latitude\":36.117209,\n             \"longitude\":-115.169788\n          },\n           \"ticket_pricing\": \"$25-35 per person (check online for deals)\",\n          \"travel_time_to_next\": \"25 minutes (bus) from Pawn Plaza\",\n          \"best_time_to_visit\": \"Sunset for the best views\"\n        }\n\n      ]\n    },\n    {\n      \"day\": 3,\n      \"locations\": [\n        {\n          \"place_name\": \"The Venetian and Grand Canal Shoppes\",\n           \"description\":\"Explore the replica of Venice with canals, gondolas, and shops. Free to walk around and enjoy the scenery.\",\n            \"image_url\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/2a/e5/86/03/gondola-ride-the-venetian.jpg?w=700&h=-1&s=1\",\n          \"geo_coordinates\": {\n            \"latitude\": 36.121564,\n            \"longitude\": -115.169899\n          },\n          \"ticket_pricing\": \"Free (gondola rides are an extra cost)\",\n           \"travel_time_to_next\": \"10 minutes (walk)\",\n           \"best_time_to_visit\": \"Morning or Early Afternoon\"\n        },\n         {\n          \"place_name\": \"Mirage Volcano\",\n           \"description\": \"Watch the erupting volcano show outside the Mirage hotel. It's a free and impressive display.\",\n          \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/22/14/75/83/volcano-the-mirage.jpg?w=700&h=-1&s=1\",\n          \"geo_coordinates\": {\n             \"latitude\": 36.122365,\n            \"longitude\": -115.173721\n          },\n          \"ticket_pricing\": \"Free\",\n           \"travel_time_to_next\": \"15-minute walk\",\n           \"best_time_to_visit\": \"Evening when it's dark\"\n        },\n           {\n              \"place_name\": \"Mandalay Bay Shark Reef Aquarium\",\n              \"description\":\"Explore the underwater world with diverse marine life at the Shark Reef Aquarium.\",\n                \"image_url\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/12/b6/ef/b7/mandalay-bay-shark-reef.jpg?w=700&h=-1&s=1\",\n              \"geo_coordinates\":{\n                \"latitude\":36.090001,\n                 \"longitude\": -115.175329\n              },\n              \"ticket_pricing\":\"$29 per person (check online for discounts)\",\n               \"travel_time_to_next\":\"15-minute walk\",\n              \"best_time_to_visit\":\"Afternoon to avoid crowds\"\n           },\n       {\n         \"place_name\": \"Explore the Strip\",\n        \"description\": \"Stroll the Las Vegas Strip one last time, enjoying the sights and sounds. Consider a budget-friendly dinner at a food court or casual restaurant before heading back to the hotel or airport.\",\n         \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Las_Vegas_Strip_Night.jpg/800px-Las_Vegas_Strip_Night.jpg\",\n         \"geo_coordinates\": {\n           \"latitude\": 36.107607,\n           \"longitude\": -115.171666\n           },\n        \"ticket_pricing\": \"Free (dining and shopping expenses vary)\",\n         \"travel_time_to_next\":\"Variable\",\n        \"best_time_to_visit\":\"Evening to see the lights\"\n       }\n      ]\n    }\n  ]\n}\n```\n\n**Budget Tips:**\n\n*   **Travel During Off-Season:** Consider visiting during the shoulder seasons (spring/fall) to find lower hotel rates.\n*   **Utilize Free Activities:** This itinerary focuses on free attractions and sights to help save money.\n*   **Walk or Use Public Transport:** Walking is a great way to explore the Strip. Utilize the bus system for longer distances. Consider purchasing a 24hr bus pass.\n*   **Eat at Affordable Places:** Food courts and casual restaurants in hotels and shopping centers provide budget-friendly meal options.\n*   **Look for Deals:** Many hotels and attractions offer online discounts. Always check before purchasing tickets.\n*   **Free Drinks While Gambling:** if you're comfortable with a small gamble, you can often get free drinks while playing slots or at the tables (remember to budget this as part of your trip, not as a way to save money!).\n\n**Notes:**\n\n*   Prices are estimates and can vary based on the time of year and availability.\n*   It's recommended to book hotels and any paid attractions in advance, especially during peak season.\n*   Always stay hydrated, especially during the warmer months.\n*   Be mindful of your belongings, especially in crowded areas.\n\nThis plan provides a great starting point for a memorable and budget-friendly Las Vegas trip! Enjoy!\n" },
            ],
        },
    ],
});

